{
  "kind": "build_request",
  "title": "Relocate Super Admin seeding to init() (remove from preupgrade/postupgrade)",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-58",
      "text": "Move all Super Admin seeding execution so it runs only during canister initialization (system func init) and never during upgrade lifecycle hooks.\n\n- In `backend/main.mo`, remove any Super Admin/admin seeding code that exists inside `system func preupgrade()` (if present). Remove the entire seeding block and do not leave conditional checks there.\n- In `backend/main.mo`, remove Super Admin seeding from `system func postupgrade()` (currently calls `seedSuperAdmin()`), so `postupgrade()` performs no admin seeding.\n- Add (or open if already present) `system func init()` in `backend/main.mo` and execute the seed logic there:\n  - `if (adminUsers.size() == 0) { seedSuperAdmin(); }`\n- Ensure the seeding runs only once on initial deployment and does not create duplicate Super Admin records on subsequent calls.\n- Keep any stable storage save/restore logic untouched (do not change state serialization/restore behavior).",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Move all Super Admin seeding logic out of preupgrade().",
          "Create or open the canister initialization function: system func init() {",
          "Inside init(), insert admin seed logic: if (adminUsers.size() == 0) { seedSuperAdmin(); }",
          "Do NOT seed admin inside: - preupgrade() - postupgrade() (for now)",
          "Keep stable storage restore logic untouched.",
          "Do NOT modify login verification logic. Do NOT modify password hash function. Only relocate seeding execution point."
        ]
      },
      "acceptanceCriteria": [
        "`backend/main.mo` contains `system func init()` that calls `seedSuperAdmin()` only when `adminUsers.size() == 0`.",
        "`system func postupgrade()` no longer calls `seedSuperAdmin()` (no admin seeding occurs during postupgrade).",
        "If `system func preupgrade()` contains any admin/super-admin seeding code, that entire seeding block is removed and no conditional seeding checks remain in `preupgrade()`.",
        "Deploying a fresh canister (empty adminUsers map) results in exactly one Super Admin being present immediately after init completes.",
        "Reinstalling the canister without stable state (fresh install) seeds the Super Admin; upgrading the canister does not trigger any new seeding via preupgrade/postupgrade."
      ]
    },
    {
      "id": "REQ-59",
      "text": "Do not change authentication behavior other than relocating the seeding execution point.\n\n- Do not modify the password hashing function implementation (`hashPassword`).\n- Do not modify admin login verification logic/output semantics (e.g., `adminLogin`, `debugAdminLogin` comparisons and return shapes).\n- Any user-facing text introduced/changed by this change must be in English (no new non-English messages).",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Do NOT modify login verification logic.",
          "Do NOT modify password hash function.",
          "Use English for any user-facing text in the build request."
        ]
      },
      "acceptanceCriteria": [
        "`hashPassword` function body is unchanged.",
        "No changes are made to the logic that compares password hashes during login/debug (other than the absence of upgrade-hook seeding side effects).",
        "No new non-English user-facing error strings are introduced as part of this change."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in `backend/main.mo` (no additional backend services).",
    "Do not seed admins in `preupgrade()` or `postupgrade()` (for now).",
    "Keep stable storage restore/save logic untouched.",
    "Do not modify login verification logic or the password hashing function; only relocate seeding execution point.",
    "Frontend immutable paths must not be edited (not needed for this change)."
  ],
  "nonGoals": [
    "Do not change which Super Admin credentials are seeded (email/password/role/status).",
    "Do not add new admin users, roles, or permissions.",
    "Do not refactor stable persistence/migration behavior beyond the seeding relocation.",
    "Do not modify or redesign any frontend admin UI or routing."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}