{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 35,
  "summary": "Automotive company profile + vehicle sales website with production-ready backend/frontend separation, stable persistence (upgrade/redeploy safe), live CMS admin panel, media manager, SEO/performance, product & article interactions, and seeded content.",
  "architectural_notes": [
    "Use stable persistence only (no in-memory) and ensure upgrade/redeploy-safe data migrations with auto-restore after redeploy.",
    "Separate backend and frontend; include persistent media storage in stable storage (not blob URLs).",
    "Admin CMS at /admin with secure authentication and role-based authority.",
    "Define stable collections for content + interactions (likes/shares/comments) and visitor statistics.",
    "TanStack Router: ensure RouterProvider is rendered exactly once (avoid double RouterProvider rendering via both rootRoute component and App.tsx) to prevent production blank screen.",
    "Storage foundation injection scope: backend-only changes for full stable persistence; do NOT modify UI or layout.",
    "Admin CMS system injection scope: implement /admin panel only (CRUD + draft/publish + delete + media upload + multi-admin roles + secure session auth) and do NOT modify any public frontend pages.",
    "Admin auth scope: implement email/password login with password hashing and secure session token stored in cookie/session; session must persist across refresh, protect all /admin routes, and support logout session invalidation. Do not modify any public frontend pages.",
    "Seed initial admin user in stable `adminUsers` for email/password auth; keep change scope backend/admin-CMS only (no public/frontend modifications).",
    "Any debug endpoint/logging for admin auth must be admin-only, must not return password hashes/tokens, and should be removable/disabled for production after verification."
  ],
  "known_issues": [
    "Production/live page shows blank screen after deploy due to frontend crash: project uses `next-themes` ThemeProvider even though frontend is Vite + React (not Next.js), causing app to fail before rendering.",
    "Draft/live publish still shows white blank screen; likely caused by TanStack Router being rendered twice (RouterProvider in both rootRoute component and App.tsx), triggering an internal error and preventing render.",
    "Admin login still fails with 'Invalid Email or Password' for the seeded credentials; suspected mismatch between frontend login payload/flow and backend hashing/session verification.",
    "/admin/auth-debug is not accessible when login fails because it is protected by AdminGuard, blocking diagnosis.",
    "Seeded super admin may not exist in runtime memory at login time due to seeding only occurring in `preupgrade()` and/or reliance on legacy stable-stored hash; requires deterministic seed-on-init/upgrade + rehash using current verifier.",
    "Potential scope conflict: existing plan mentions seeding on startup and after upgrades; latest decision restricts seeding to `init()` only (no `postupgrade()`), which may leave upgraded canisters without a seeded Super Admin if stable restore does not include it.",
    "Admin auth bug: login succeeds but session is not persisted client-side, causing redirect back to login form instead of `/admin` dashboard.",
    "Login loop prevents accessing /admin dashboard; requires temporary emergency bypass to validate CMS/storage/UI independently of auth.",
    "Media library authorization failure: admin login works but media endpoints return \"Unauthorized: Only admins can view media assets\" due to media service using a different auth source (e.g., principal whitelist) than CMS session auth.",
    "Admin CMS: PassengerVehicles and CommercialVehicles editor buttons both appear active (both red) when one is selected; tab/state styling logic likely incorrect."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-build-an-admin-authentication-and-authority-system-for-admin-supporting-email-password-login-multi-admin-accounts-and-role-based-access-control-seed-an-initial-super-admin-bound-to-principal-id-7aizr-qwhrg-kuvhe-yekzz-6nj4a-t6yeb-5gnrb-pjpwy-gp2ut-up3m5-3qe-as-owner-with-the-ability-to-manage-other-admins-and-roles",
      "title": "Build an admin authentication and authority system for /admin supporting email + password login, multi-admin accounts, and role-based access control. Seed an initial super-admin bound to Principal ID `7aizr-qwhrg-kuvhe-yekzz-6nj4a-t6yeb-5gnrb-pjpwy-gp2ut-up3m5-3qe` (as owner) with the ability to manage other admins and roles.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-live-cms-admin-panel-at-route-admin-that-provides-crud-draft-publish-workflows-for-passenger-vehicles-mobil-keluarga-commercial-vehicles-mobil-niaga-promotions-testimonials-blog-posts-leads-contacts-credit-simulations-visitor-statistics-counters-and-admin-user-profile-the-cms-must-be-wired-to-stable-persistence-so-changes-are-immediately-reflected-on-public-pages",
      "title": "Implement a live CMS admin panel at route /admin that provides CRUD + draft/publish workflows for: Passenger Vehicles (Mobil Keluarga), Commercial Vehicles (Mobil Niaga), Promotions, Testimonials, Blog Posts, Leads/Contacts, Credit Simulations, Visitor Statistics counters, and Admin User Profile. The CMS must be wired to stable persistence so changes are immediately reflected on public pages.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-stable-media-storage-system-media-manager-backed-by-the-canister-supporting-png-jpg-webp-and-pdf-with-upload-replace-delete-and-folder-grouping-media-must-be-persisted-in-stable-storage-not-blob-urls-and-returned-as-retrievable-urls-streams-for-frontend-display-download-include-automatic-compression-for-images-where-feasible",
      "title": "Implement a stable media storage system (Media Manager) backed by the canister, supporting PNG, JPG, WebP, and PDF with upload, replace, delete, and folder grouping. Media must be persisted in stable storage (not blob URLs) and returned as retrievable URLs/streams for frontend display/download. Include automatic compression for images where feasible.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-public-site-routing-and-navigation-structure-with-pages-and-paths-home-passenger-vehicles-mobil-keluarga-commercial-vehicles-mobil-niaga-promo-promo-testimonials-testimoni-blog-blog-contact-kontak-all-pages-must-include-a-red-hero-section-c90010-with-150px-height-on-mobile-and-a-bottom-cta-section",
      "title": "Create the public site routing and navigation structure with pages and paths: Home (/), Passenger Vehicles (/mobil-keluarga), Commercial Vehicles (/mobil-niaga), Promo (/promo), Testimonials (/testimoni), Blog (/blog), Contact (/kontak). All pages must include a red hero section (#C90010) with 150px height on mobile and a bottom CTA section.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-build-a-sticky-responsive-navbar-ui-background-262729-desktop-height-80px-with-logo-on-the-left-menu-centered-right-and-a-right-aligned-cta-button-whatsapp-contact-mobile-height-64px-with-hamburger-menu-and-sticky-behavior-solid-background-both-at-top-and-on-scroll",
      "title": "Build a sticky responsive Navbar UI: background #262729; desktop height 80px with logo on the left, menu centered/right, and a right-aligned CTA button (WhatsApp / Contact); mobile height 64px with hamburger menu and sticky behavior; solid background both at top and on scroll.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-footer-with-background-262729-and-sections-dealer-logo-description-contact-info-address-whatsapp-email-operating-hours-social-links-facebook-instagram-twitter-x-tiktok-youtube-visitor-statistics-total-visitors-active-users-page-views-today-traffic-and-copyright-populate-contact-identity-with-name-fuad-whatsapp-0852-1234-0778-email-fuadmitsubishi2025-gmail-com-address-jl-raya-subang-no-123-subang-jawa-barat-41211",
      "title": "Implement the footer with background #262729 and sections: dealer logo + description; Contact info (address, WhatsApp, email, operating hours); Social links (Facebook, Instagram, Twitter/X, TikTok, YouTube); Visitor statistics (total visitors, active users, page views, today traffic); and copyright. Populate contact identity with: Name Fuad, WhatsApp 0852-1234-0778, Email fuadmitsubishi2025@gmail.com, Address Jl. Raya Subang No. 123, Subang, Jawa Barat 41211.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-sticky-bottom-cta-bar-fixed-to-the-bottom-of-the-viewport-with-4-actions-call-c90010-whatsapp-398e3d-credit-simulation-fea500-main-menu-0166c0-include-icon-label-full-color-backgrounds-shadow-divider-and-rounded-top-corners-the-main-menu-opens-a-slide-up-dropdown-with-smooth-transitions-and-closes-on-outside-tap-it-lists-the-specified-navigation-items-and-supports-multilevel-menus-for-passenger-and-commercial-categories",
      "title": "Implement a sticky Bottom CTA Bar fixed to the bottom of the viewport with 4 actions: Call (#C90010), WhatsApp (#398E3D), Credit Simulation (#FEA500), Main Menu (#0166C0). Include icon + label, full color backgrounds, shadow divider, and rounded top corners. The Main Menu opens a slide-up dropdown with smooth transitions and closes on outside tap; it lists the specified navigation items and supports multilevel menus for Passenger and Commercial categories.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-home-page-sections-main-banner-slider-png-images-featured-products-highlight-grid-cta-banner-image-on-262729-background-about-us-section-with-f1c40f-background-a-feature-section-whatsapp-cta-section-featured-products-section-search-bar-and-the-5-latest-blog-articles-list-all-content-must-be-cms-driven-and-support-placeholder-images",
      "title": "Implement the Home page sections: main banner slider (PNG images), featured products highlight grid, CTA banner image on #262729 background, About Us section with #F1C40F background, a feature section, WhatsApp CTA section, featured products section, search bar, and the 5 latest blog articles list. All content must be CMS-driven and support placeholder images.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-passenger-vehicles-listing-page-mobil-keluarga-with-a-responsive-grid-4-columns-desktop-3-tablet-2-mobile-each-card-shows-photo-name-description-starting-price-a-consult-cta-and-a-detail-button-linking-to-the-passenger-vehicle-detail-page",
      "title": "Implement Passenger Vehicles listing page (/mobil-keluarga) with a responsive grid (4 columns desktop, 3 tablet, 2 mobile). Each card shows photo, name, description, starting price, a Consult CTA, and a Detail button linking to the passenger vehicle detail page.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-commercial-vehicles-page-mobil-niaga-with-three-category-sections-cards-light-duty-17-types-medium-duty-10-types-tractor-head-2-types-exactly-as-listed-include-grid-listing-4-3-2-responsive-in-the-cms-editor-for-commercial-vehicles-add-checkbox-fields-to-apply-label-badge-options-per-category-light-duty-economical-power-speed-capacity-bus-medium-duty-4x2-6x2-6x4-tractor-head-4x2-6x4",
      "title": "Implement Commercial Vehicles page (/mobil-niaga) with three category sections/cards: Light Duty (17 types), Medium Duty (10 types), Tractor Head (2 types) exactly as listed; include grid listing (4/3/2 responsive). In the CMS editor for commercial vehicles, add checkbox fields to apply label/badge options per category: Light Duty (Economical, Power, Speed, Capacity, Bus), Medium Duty (4x2, 6x2, 6x4), Tractor Head (4x2, 6x4).",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-promo-page-promo-with-cms-driven-promo-items-including-banner-description-period-and-terms-conditions",
      "title": "Implement Promo page (/promo) with CMS-driven promo items including banner, description, period, and terms & conditions.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-testimonials-page-testimoni-showing-cms-driven-testimonials-with-customer-photo-placeholder-name-city-and-review-text",
      "title": "Implement Testimonials page (/testimoni) showing CMS-driven testimonials with customer photo placeholder, name, city, and review text.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-blog-listing-page-blog-and-blog-post-detail-pages-with-cms-driven-content-seo-friendly-metadata-title-description-images-and-an-interactions-section-like-share-comments-as-specified-the-blog-list-must-display-latest-posts-and-support-navigation-to-detail-pages",
      "title": "Implement Blog listing page (/blog) and blog post detail pages with CMS-driven content, SEO-friendly metadata (title/description), images, and an interactions section (like/share/comments) as specified. The blog list must display latest posts and support navigation to detail pages.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-contact-page-kontak-with-a-contact-form-stored-in-stable-storage-contacts-collection-using-fields-name-address-phone-number-email-message-unit-down-payment-tenor-notes-date-show-phone-email-address-operating-hours-embed-google-maps-via-an-iframe-embed-configurable-in-cms-and-display-a-sales-consultant-profile-using-the-provided-contact-identity",
      "title": "Implement Contact page (/kontak) with: a contact form stored in stable storage (contacts collection) using fields Name, Address, Phone Number, Email, Message, Unit, Down Payment, Tenor, Notes, Date; show phone/email/address/operating hours; embed Google Maps via an iframe embed (configurable in CMS); and display a sales consultant profile using the provided contact identity.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-credit-simulation-flow-accessible-from-the-bottom-cta-bar-that-stores-submissions-in-creditsimulations-using-the-same-fields-as-contacts-plus-a-timestamp-admin-can-view-and-manage-these-leads-in-the-cms",
      "title": "Add a Credit Simulation flow accessible from the bottom CTA bar that stores submissions in creditSimulations using the same fields as contacts plus a timestamp. Admin can view and manage these leads in the CMS.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-product-interaction-system-for-vehicles-like-love-icon-and-share-actions-stored-in-stable-storage-for-both-passenger-and-commercial-vehicle-detail-pages-and-or-listings-share-targets-must-include-whatsapp-facebook-twitter-x-and-copy-link",
      "title": "Implement product interaction system for vehicles: Like (love icon) and Share actions stored in stable storage for both passenger and commercial vehicle detail pages and/or listings. Share targets must include WhatsApp, Facebook, Twitter/X, and Copy Link.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-passenger-vehicle-detail-pages-with-a-dynamic-variant-color-system-managed-via-admin-variants-ultimate-exceed-gls-colors-quartz-white-pearl-3-000-000-blade-silver-metallic-graphite-gray-metallic-jet-black-mica-lunar-blue-mica-expandable-up-to-10-colors-enforce-rules-lunar-blue-only-available-for-ultimate-premium-only-constraint-must-be-supported-as-an-admin-controlled-rule-selecting-variant-color-auto-changes-image-and-auto-calculates-price-include-gallery-specs-tabs-features-tabs-cta-buttons-and-brochure-download",
      "title": "Implement Passenger Vehicle detail pages with a dynamic variant + color system managed via admin: variants (Ultimate, Exceed, GLS), colors (Quartz White Pearl +3,000,000; Blade Silver Metallic; Graphite Gray Metallic; Jet Black Mica; Lunar Blue Mica), expandable up to 10 colors. Enforce rules: Lunar Blue only available for Ultimate; Premium-only constraint must be supported as an admin-controlled rule; selecting variant/color auto-changes image and auto-calculates price. Include gallery, specs tabs, features tabs, CTA buttons, and brochure download.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-commercial-vehicle-detail-pages-with-fixed-image-no-color-variant-switcher-white-background-chassis-price-label-required-optional-price-note-technical-specs-key-features-optional-additional-gallery-and-cta-buttons-contact-sales-credit-simulation-download-brochure-support-admin-defined-labels-badges-for-chassis-variants-e-g-fn62-fighter-without-enabling-color-switching",
      "title": "Implement Commercial Vehicle detail pages with fixed image (no color/variant switcher), white background, chassis price label (required), optional price note, technical specs, key features, optional additional gallery, and CTA buttons (Contact Sales, Credit Simulation, Download Brochure). Support admin-defined labels/badges for chassis variants (e.g., FN62, Fighter) without enabling color switching.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-visitor-statistics-tracking-persisted-in-stable-storage-including-total-visitors-active-users-page-views-and-today-traffic-display-these-stats-in-the-footer-and-provide-an-admin-view-to-inspect-and-if-required-adjust-counters",
      "title": "Implement visitor statistics tracking persisted in stable storage, including: total visitors, active users, page views, and today traffic. Display these stats in the footer and provide an admin view to inspect and (if required) adjust counters.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-seed-the-cms-with-initial-content-6-blog-posts-200-300-words-each-seo-optimized-on-the-provided-topics-with-placeholder-images-and-6-testimonials-with-photo-placeholder-name-city-review-text-matching-the-provided-list-seed-content-must-be-stored-in-stable-persistence-and-editable-via-admin",
      "title": "Seed the CMS with initial content: 6 blog posts (200–300 words each, SEO-optimized) on the provided topics with placeholder images; and 6 testimonials (with photo placeholder, name, city, review text) matching the provided list. Seed content must be stored in stable persistence and editable via admin.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-ai-placeholder-media-and-wire-it-into-seeded-content-and-templates-placeholder-images-for-vehicles-blog-posts-and-testimonials-placeholders-must-be-replaceable-through-the-admin-media-manager-without-breaking-references",
      "title": "Generate AI placeholder media and wire it into seeded content and templates: placeholder images for vehicles, blog posts, and testimonials. Placeholders must be replaceable through the admin media manager without breaking references.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-seo-and-performance-optimizations-across-public-pages-per-page-meta-title-and-meta-description-image-optimization-strategy-lazy-loading-for-images-lists-fast-loading-best-practices-and-mobile-responsiveness",
      "title": "Implement SEO and performance optimizations across public pages: per-page meta title and meta description, image optimization strategy, lazy-loading for images/lists, fast loading best practices, and mobile responsiveness.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-define-and-apply-one-coherent-visual-theme-across-the-entire-frontend-colors-typography-spacing-component-styling-that-fits-an-automotive-dealer-brand-and-respects-the-required-color-constants-c90010-hero-call-262729-navbar-footer-f1c40f-about-section-and-cta-bar-colors-avoid-using-a-blue-purple-primary-palette",
      "title": "Define and apply one coherent visual theme across the entire frontend (colors, typography, spacing, component styling) that fits an automotive dealer brand and respects the required color constants (#C90010 hero/Call, #262729 navbar/footer, #F1C40F About section, and CTA bar colors). Avoid using a blue+purple primary palette.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-the-next-themes-dependency-usage-that-causes-the-vite-react-app-to-crash-before-rendering-and-replace-it-with-a-vite-compatible-approach-that-keeps-the-app-in-the-default-light-theme-using-the-existing-tailwind-css-variables-update-frontend-src-app-tsx-to-no-longer-import-or-render-themeprovider-from-next-themes-and-ensure-the-router-and-toaster-still-render-normally",
      "title": "Remove the `next-themes` dependency/usage that causes the Vite React app to crash before rendering, and replace it with a Vite-compatible approach that keeps the app in the default light theme (using the existing Tailwind CSS variables). Update `frontend/src/App.tsx` to no longer import or render `ThemeProvider` from `next-themes` and ensure the router and Toaster still render normally.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-minimal-global-runtime-error-fallback-so-that-if-a-top-level-render-error-occurs-in-production-users-see-a-simple-english-message-instead-of-a-fully-blank-screen-and-developers-can-still-see-the-error-in-the-console",
      "title": "Add a minimal global runtime error fallback so that if a top-level render error occurs in production, users see a simple English message instead of a fully blank screen, and developers can still see the error in the console.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-tanstack-router-setup-so-routerprovider-is-rendered-exactly-once-by-the-app-update-frontend-src-app-tsx-to-remove-the-routerprovider-usage-inside-the-createrootroute-component-and-replace-it-with-the-correct-root-route-rendering-e-g-an-outlet-keep-the-existing-routerprovider-in-the-app-component-as-the-single-router-mount",
      "title": "Fix the TanStack Router setup so `RouterProvider` is rendered exactly once by the app. Update `frontend/src/App.tsx` to remove the `RouterProvider` usage inside the `createRootRoute` component and replace it with the correct root route rendering (e.g., an outlet). Keep the existing `RouterProvider` in the `App` component as the single router mount.",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-admin-authentication-for-the-admin-area-using-email-password-with-secure-session-based-authentication-not-internet-identity-supporting-logout-and-session-persistence-across-refreshes",
      "title": "Implement admin authentication for the /admin area using email + password with secure session-based authentication (not Internet Identity), supporting logout and session persistence across refreshes.",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-admin-cms-dashboard-sidebar-menus-match-the-requested-cms-sections-and-route-to-working-management-pages-for-each-section-mobil-keluarga-passenger-vehicles-mobil-niaga-commercial-vehicles-promo-testimoni-testimonials-blog-leads-kontak-visitor-statistics-and-admin-user-profile",
      "title": "Ensure the Admin CMS dashboard sidebar menus match the requested CMS sections and route to working management pages for each section: Mobil Keluarga (Passenger Vehicles), Mobil Niaga (Commercial Vehicles), Promo, Testimoni (Testimonials), Blog, Leads/Kontak, Visitor Statistics, and Admin User Profile.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-complete-the-admin-cms-functionality-for-the-requested-sections-with-live-stable-storage-integration-crud-operations-draft-publish-workflow-where-applicable-delete-and-media-upload-selection-via-the-media-manager",
      "title": "Complete the Admin CMS functionality for the requested sections with live stable-storage integration: CRUD operations, draft/publish workflow (where applicable), delete, and media upload/selection via the Media Manager.",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-only-frontend-authentication-flow-to-use-email-password-login-against-the-new-backend-login-method-store-the-returned-session-token-client-side-cookie-and-or-localstorage-and-ensure-the-admin-session-persists-across-refreshes-and-supports-logout-that-destroys-the-session-in-the-backend-do-not-modify-any-public-non-admin-pages",
      "title": "Update the admin-only frontend authentication flow to use email/password login against the new backend login method, store the returned session token client-side (cookie and/or localStorage), and ensure the admin session persists across refreshes and supports logout that destroys the session in the backend. Do not modify any public (non-/admin) pages.",
      "reqIds": [
        "REQ-43"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-current-internet-identity-based-admin-guard-logic-with-session-token-based-guarding-for-all-admin-routes-so-unauthenticated-users-are-redirected-to-admin-login-and-authenticated-users-without-required-privileges-are-blocked-with-an-english-access-denied-message",
      "title": "Replace the current Internet Identity-based admin guard logic with session-token-based guarding for all `/admin` routes so unauthenticated users are redirected to `/admin/login`, and authenticated users without required privileges are blocked with an English 'Access denied' message.",
      "reqIds": [
        "REQ-44"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-only-ui-affordance-to-run-the-login-debug-test-for-the-provided-credentials-and-display-the-debug-output-exactly-as-labeled-user-found-password-match-hash-compare-method-used-session-created-and-error-reason-if-failed-this-ui-must-be-accessible-only-within-the-admin-area-not-public-pages",
      "title": "Add an admin-only UI affordance to run the login debug test for the provided credentials and display the debug output exactly as labeled: 'User found', 'Password match', 'Hash compare method used', 'Session created', and 'Error reason if failed'. This UI must be accessible only within the /admin area (not public pages).",
      "reqIds": [
        "REQ-51"
      ],
      "version": 1
    },
    {
      "id": "feature-update-routing-so-the-admin-login-debug-page-at-admin-auth-debug-is-accessible-without-adminguard-so-users-can-open-the-debug-tool-even-when-they-cannot-log-in",
      "title": "Update routing so the Admin Login Debug page at `/admin/auth-debug` is accessible without `AdminGuard`, so users can open the debug tool even when they cannot log in.",
      "reqIds": [
        "REQ-52"
      ],
      "version": 1
    },
    {
      "id": "feature-store-the-returned-admin-session-token-in-localstorage-under-the-key-caffeineadmintoken-without-changing-the-admin-ui-visuals-layout",
      "title": "Store the returned admin session token in localStorage under the key \"caffeineAdminToken\" (without changing the admin UI visuals/layout).",
      "reqIds": [
        "REQ-64"
      ],
      "version": 1
    },
    {
      "id": "feature-redeploy-the-current-backend-and-frontend-to-the-internet-computer-without-introducing-functional-changes-so-the-latest-build-is-live-again",
      "title": "Redeploy the current backend and frontend to the Internet Computer without introducing functional changes, so the latest build is live again.",
      "reqIds": [
        "REQ-65"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-session-storage-implementation-to-store-the-authenticated-session-under-the-single-browser-storage-key-caffeineadminsession-localstorage-and-or-cookie-and-ensure-the-app-reads-writes-only-this-key-for-admin-session-persistence",
      "title": "Update the admin session storage implementation to store the authenticated session under the single browser storage key `caffeineAdminSession` (localStorage and/or cookie), and ensure the app reads/writes only this key for admin session persistence.",
      "reqIds": [
        "REQ-66"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-admin-login-flow-so-that-on-successful-authentication-it-does-not-reload-the-login-page-and-navigates-to-the-admin-dashboard-route-admin-not-admin-login",
      "title": "Fix the admin login flow so that on successful authentication it does not reload the login page and navigates to the admin dashboard route `/admin` (not `/admin/login`).",
      "reqIds": [
        "REQ-67"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-admin-route-guarding-so-that-1-if-a-valid-caffeineadminsession-exists-allow-access-to-admin-routes-2-if-no-session-exists-redirect-to-admin-login-ensure-guard-redirects-are-performed-without-causing-render-time-navigation-loops",
      "title": "Fix the admin route guarding so that: (1) if a valid `caffeineAdminSession` exists, allow access to `/admin` routes; (2) if no session exists, redirect to `/admin/login`. Ensure guard redirects are performed without causing render-time navigation loops.",
      "reqIds": [
        "REQ-68"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-backend-adminlogin-email-password-returns-an-auth-token-session-object-on-success-containing-at-least-token-and-role-and-that-the-frontend-consumes-this-response-to-persist-caffeineadminsession",
      "title": "Ensure the backend `adminLogin(email, password)` returns an auth token/session object on success (containing at least token and role) and that the frontend consumes this response to persist `caffeineAdminSession`.",
      "reqIds": [
        "REQ-69"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-temporary-clearly-marked-emergency-bypass-mode-for-the-admin-area-that-disables-the-normal-authentication-guard-behavior-and-allows-direct-access-to-the-admin-dashboard-route-admin-without-entering-credentials",
      "title": "Implement a temporary, clearly-marked emergency bypass mode for the admin area that disables the normal authentication guard behavior and allows direct access to the admin dashboard route `/admin` without entering credentials.",
      "reqIds": [
        "REQ-71"
      ],
      "version": 1
    },
    {
      "id": "feature-when-bypass-mode-is-enabled-and-no-caffeineadminsession-exists-in-browser-storage-automatically-create-and-persist-an-admin-session-client-side-with-role-super-admin-so-admin-cms-react-query-hooks-can-use-a-token-immediately",
      "title": "When bypass mode is enabled and no `caffeineAdminSession` exists in browser storage, automatically create and persist an admin session client-side with role = \"Super Admin\" so admin CMS React Query hooks can use a token immediately.",
      "reqIds": [
        "REQ-72"
      ],
      "version": 1
    },
    {
      "id": "feature-wire-the-frontend-bypass-flow-to-call-the-backend-bypass-login-method-when-enabled-so-that-the-created-caffeineadminsession-token-is-a-real-backend-recognized-token-and-admin-cms-endpoints-work-end-to-end",
      "title": "Wire the frontend bypass flow to call the backend bypass login method (when enabled) so that the created `caffeineAdminSession.token` is a real backend-recognized token and admin CMS endpoints work end-to-end.",
      "reqIds": [
        "REQ-74"
      ],
      "version": 1
    },
    {
      "id": "feature-when-bypass-mode-is-enabled-redirect-all-admin-traffic-that-would-normally-land-on-the-login-page-to-the-dashboard-admin-so-the-login-ui-is-effectively-skipped-during-debugging",
      "title": "When bypass mode is enabled, redirect all `/admin/*` traffic that would normally land on the login page to the dashboard (`/admin`) so the login UI is effectively skipped during debugging.",
      "reqIds": [
        "REQ-75"
      ],
      "version": 1
    },
    {
      "id": "feature-do-not-modify-any-admin-or-public-ui-components-routes-layouts-or-storage-logic-on-the-frontend-keep-the-current-frontend-behavior-and-payloads-intact-and-make-the-backend-authorization-changes-compatible-with-the-existing-frontend-calls-e-g-actor-getmediaassets-token-actor-createmediaasset-token-asset-actor-deletemediaasset-token-id",
      "title": "Do not modify any admin or public UI components, routes, layouts, or storage logic on the frontend; keep the current frontend behavior and payloads intact and make the backend authorization changes compatible with the existing frontend calls (e.g., `actor.getMediaAssets(token)`, `actor.createMediaAsset(token, asset)`, `actor.deleteMediaAsset(token, id)`).",
      "reqIds": [
        "REQ-78"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-admin-sidebar-nav-active-state-logic-so-that-the-two-vehicle-menu-items-admin-vehicles-category-passenger-and-admin-vehicles-category-commercial-are-visually-separated-and-only-the-correct-one-is-highlighted-as-active-avoid-both-buttons-links-appearing-active-red-at-the-same-time",
      "title": "Fix the Admin sidebar/nav active-state logic so that the two vehicle menu items (/admin/vehicles?category=passenger and /admin/vehicles?category=commercial) are visually separated and only the correct one is highlighted as active (avoid both buttons/links appearing active/red at the same time).",
      "reqIds": [
        "REQ-79"
      ],
      "version": 1
    },
    {
      "id": "feature-upgrade-the-passenger-and-commercial-vehicle-admin-editor-the-add-edit-vehicle-dialog-to-be-significantly-richer-and-closer-to-the-intended-cms-blueprint-by-adding-complete-vehicle-editing-capabilities-for-variants-specs-and-commercial-badges-while-remaining-compatible-with-the-existing-vehicle-data-model-and-backend-methods-createvehicle-updatevehicle",
      "title": "Upgrade the Passenger and Commercial Vehicle admin editor (the Add/Edit Vehicle dialog) to be significantly richer and closer to the intended CMS blueprint by adding complete vehicle editing capabilities for variants, specs, and commercial badges—while remaining compatible with the existing Vehicle data model and backend methods (createVehicle/updateVehicle).",
      "reqIds": [
        "REQ-80"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-admin-media-manager-and-media-picker-reliably-display-media-assets-when-present-and-show-a-clear-empty-state-message-when-none-exist-ensure-user-facing-text-is-in-english-and-consistent-across-media-pages-and-pickers",
      "title": "Make the Admin Media Manager and Media Picker reliably display media assets (when present) and show a clear empty-state message when none exist; ensure user-facing text is in English and consistent across Media pages and pickers.",
      "reqIds": [
        "REQ-81"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-the-public-vehicle-listing-grid-ui-and-vehicle-card-styling-to-look-more-professional-and-attractive-while-keeping-the-same-routing-and-cms-driven-data-wiring-no-new-content-requirements",
      "title": "Improve the public vehicle listing grid UI and vehicle card styling to look more professional and attractive while keeping the same routing and CMS-driven data wiring (no new content requirements).",
      "reqIds": [
        "REQ-82"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-the-public-passenger-and-commercial-vehicle-detail-page-ui-to-look-more-polished-layout-spacing-sections-and-ensure-the-pages-remain-usable-when-vehicles-have-no-uploaded-media-use-placeholders-and-or-have-empty-optional-fields",
      "title": "Improve the public Passenger and Commercial vehicle detail page UI to look more polished (layout, spacing, sections), and ensure the pages remain usable when vehicles have no uploaded media (use placeholders) and/or have empty optional fields.",
      "reqIds": [
        "REQ-83"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Core system foundation with stable persistence storage (not in-memory), upgrade-safe mapping, canister lifecycle-safe storage, and auto-restore after redeploy",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Frontend site structure with main navigation pages (Beranda, Mobil Keluarga, Mobil Niaga, Promo, Testimoni, Blog, Kontak) including red hero section and bottom CTA section on all pages",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Navbar UI/UX (sticky) for desktop/mobile with specified colors, layout, and CTA button (WhatsApp/Hubungi Kami)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Footer structure with contact info, social links, visitor statistics, and copyright",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Sticky bottom CTA bar with Call/WhatsApp/Simulasi Kredit/Main Menu + dropdown and animations",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Page implementations: Beranda sections, Mobil Keluarga listing grid, Mobil Niaga category cards + listing grid, Promo, Testimoni, Kontak (form + maps + sales consultant profile)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Stable storage database collections for vehicles, promotions, testimonials, blog posts, contacts, credit simulations, admin users, visitor stats, media assets, and interaction collections (likes/shares/comments)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Admin panel / live CMS at /admin with secure login, multi-admin roles/authority, CRUD for all content types, draft/publish, and visitor stats management",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Media storage system (stable media manager) supporting PNG/JPG/WebP/PDF with upload/replace/delete, folders, and auto-compression",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Interaction systems: product likes/shares and article likes/shares/comments with admin moderation; share targets include WhatsApp/Facebook/X/copy link",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Product detail pages: passenger vehicles with variants/colors (rules + auto price/image), commercial vehicles with static image/no colors, chassis price fields, CTAs, and brochure download",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "SEO & performance optimization (meta tags, image optimization, lazy load, fast loading, mobile responsive) + seed content generation (6 blog articles, 6 testimonials) and AI placeholder media for vehicles/blog/testimonials",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Implement a production-ready Motoko backend with upgrade-safe stable persistence for all specified collections: passengerVehicles, commercialVehicles, promotions, testimonials, blogPosts, contacts, creditSimulations, adminUsers, visitorStats, mediaAssets, productLikes, productShares, articleLikes, articleComments. Data must survive canister upgrade, redeploy, and rebuild; implement canister lifecycle-safe storage with automatic restore after redeploy.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Replace all in-memory collections in `backend/main.mo` with upgrade-safe stable persistence so that data survives draft rebuilds, canister upgrades, and version redeploys.",
      "reqIds": [
        "REQ-28"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Create and persist stable collections for the following domain datasets: `passengerVehicles`, `commercialVehicles`, `promotions`, `testimonials`, `blogPosts`, `contacts`, `creditSimulations`, `adminUsers`, `visitorStats`, `mediaAssets`. Ensure the stable schema is explicitly defined and versioned to allow safe future upgrades.",
      "reqIds": [
        "REQ-29"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Create and persist stable interaction collections: `productLikes`, `productShares`, `articleLikes`, `articleComments`. Map or split any existing combined interaction state (e.g., a single `productInteractions` map) into these stable collections without data loss.",
      "reqIds": [
        "REQ-30"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Implement upgrade-safe lifecycle hooks and data mapping that automatically saves to stable state on upgrade and restores on deploy/upgrade, including handling schema evolution and backward-compatible decoding from prior in-memory layouts.",
      "reqIds": [
        "REQ-31"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Keep the backend public interface compatible with the existing frontend (no UI changes): preserve existing method names and argument/return types where currently used, and add internal mapping so existing endpoints continue to read/write the new stable collections.",
      "reqIds": [
        "REQ-32"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Add/extend stable-storage persistence for admin users, roles, and sessions so that admin accounts and active sessions survive canister upgrades/redeploys (upgrade-safe, stable collections).",
      "reqIds": [
        "REQ-34"
      ],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Update the admin route protection logic to use the new email/password session auth (instead of Internet Identity) while keeping the existing /admin route structure and admin-only access control.",
      "reqIds": [
        "REQ-35"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Implement backend email/password admin authentication: stable adminUsers collection (id,email,passwordHash,role,createdAt), password hashing, POST /admin/login, secure session token stored via session/cookie with persistence across refresh, protect all /admin routes, logout destroys session, redirect to dashboard after login (admin-only; no public page changes)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Implement a stable-persisted `adminUsers` collection in the Motoko backend with fields: `id`, `email`, `passwordHash`, `role`, `createdAt`, and ensure it is upgrade-safe (data survives canister redeploy/upgrade).",
      "reqIds": [
        "REQ-38"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Add password hashing support in the backend for admin user passwords, using a salted, one-way hash and constant-time password verification.",
      "reqIds": [
        "REQ-39"
      ],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Implement an admin login API for email/password authentication that validates the email exists and the provided password matches the stored hash, and returns a secure session token on success.",
      "reqIds": [
        "REQ-40"
      ],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Implement a stable-persisted admin session store in the backend that maps session tokens to an admin user (and role), supports session expiry/invalidations as needed, and survives canister upgrade/redeploy.",
      "reqIds": [
        "REQ-41"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Protect all admin/CMS backend methods so that any operation used by the /admin UI (e.g., create/update/delete content, viewing leads, media management, visitor stats updates) requires a valid admin session token and enforces authorization based on the admin role.",
      "reqIds": [
        "REQ-42"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Seed 1 initial Super Admin user in stable `adminUsers` collection (email: puadsolihan@gmail.com, password: 66669999 with hashing only if required by auth system, role: Super Admin, status: Active) and ensure this account can authenticate and access /admin dashboard; backend/admin-CMS only (no frontend changes).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Persist the `adminUsers` collection in stable storage (upgrade/redeploy safe) and ensure the stored data is restored correctly after canister upgrade/redeploy.",
      "reqIds": [
        "REQ-45"
      ],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Seed exactly 1 Super Admin record into the `adminUsers` collection with: Email `puadsolihan@gmail.com`, Password `66669999`, Role `Super Admin`, Status `Active`, and `createdAt` set to a timestamp; the seed must be idempotent (must not create duplicates on redeploy/upgrade).",
      "reqIds": [
        "REQ-46"
      ],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Ensure the seeded admin user can authenticate via the existing email/password admin login method; do not hash the password unless the current authentication system requires hashing, and if hashing is required then automatically hash `66669999` during seeding in the same format used by the login verifier.",
      "reqIds": [
        "REQ-47"
      ],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Enforce admin account Status in authentication/authorization: only admin users with Status `Active` can successfully log in and access admin/CMS protected methods used by the `/admin` dashboard.",
      "reqIds": [
        "REQ-48"
      ],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Add a secure admin-auth debug/test capability to validate email/password login for the seeded Super Admin (report user found, password match, hash compare method, session creation, and error reason) without exposing sensitive data.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "Add a backend debug method to test admin email/password authentication for a given email/password pair and return a structured debug report with: (1) user found yes/no, (2) password match yes/no, (3) hash compare method used, (4) session created yes/no, and (5) error reason if failed. The debug method must not expose the stored password hash or any other sensitive data.",
      "reqIds": [
        "REQ-49"
      ],
      "status": "pending"
    },
    {
      "id": "AR-35",
      "summary": "Restrict the new backend admin login debug method so it cannot be called by the public internet. It must only be callable by the seeded owner Principal `7aizr-qwhrg-kuvhe-yekzz-6nj4a-t6yeb-5gnrb-pjpwy-gp2ut-up3m5-3qe` OR by an already-authenticated admin session token (if you choose a token-gated signature). Return an English 'Access denied' error (trap or variant) when unauthorized.",
      "reqIds": [
        "REQ-50"
      ],
      "status": "pending"
    },
    {
      "id": "AR-36",
      "summary": "Temporarily allow access to the admin login debug page/route (/admin/auth-debug) without AdminGuard so login failures can be diagnosed when no admin session can be created (must be reversible/disable for production).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Make the `/admin/auth-debug` page usable without an admin session by allowing the backend `debugAdminLogin(email, password, sessionToken)` method to run when debug mode is enabled, even if `sessionToken` is null/invalid; keep returning only the existing non-sensitive `AdminLoginDebugReport` fields and keep all user-facing error messages in English.",
      "reqIds": [
        "REQ-53"
      ],
      "status": "pending"
    },
    {
      "id": "AR-39",
      "summary": "Add an owner-only backend method to enable/disable debug mode (toggle the existing `debugEnabled` flag) so this \"no-guard\" debug access can be turned off after diagnosis; ensure the flag value persists safely across upgrades according to the project’s migration policy.",
      "reqIds": [
        "REQ-54"
      ],
      "status": "pending"
    },
    {
      "id": "AR-40",
      "summary": "Move the Super Admin seeding logic out of `system func preupgrade()` and implement a single deterministic seeding path that runs at canister startup and after upgrades, ensuring the Super Admin exists in runtime memory before any login verification can execute.",
      "reqIds": [
        "REQ-55"
      ],
      "status": "pending"
    },
    {
      "id": "AR-41",
      "summary": "Ensure Super Admin seeding always rebuilds the password hash using the exact same runtime function used in login verification, and do not rely on any legacy/stable-stored hash value for the seeded Super Admin.",
      "reqIds": [
        "REQ-56"
      ],
      "status": "pending"
    },
    {
      "id": "AR-42",
      "summary": "After running the seed logic, log the admin user count to the canister console to confirm that admin users loaded/seeded successfully.",
      "reqIds": [
        "REQ-57"
      ],
      "status": "pending"
    },
    {
      "id": "AR-43",
      "summary": "Move all Super Admin seeding execution so it runs only during canister initialization (system func init) and never during upgrade lifecycle hooks.\n\n- In `backend/main.mo`, remove any Super Admin/admin seeding code that exists inside `system func preupgrade()` (if present). Remove the entire seeding block and do not leave conditional checks there.\n- In `backend/main.mo`, remove Super Admin seeding from `system func postupgrade()` (currently calls `seedSuperAdmin()`), so `postupgrade()` performs no admin seeding.\n- Add (or open if already present) `system func init()` in `backend/main.mo` and execute the seed logic there:\n  - `if (adminUsers.size() == 0) { seedSuperAdmin(); }`\n- Ensure the seeding runs only once on initial deployment and does not create duplicate Super Admin records on subsequent calls.\n- Keep any stable storage save/restore logic untouched (do not change state serialization/restore behavior).",
      "reqIds": [
        "REQ-58"
      ],
      "status": "pending"
    },
    {
      "id": "AR-44",
      "summary": "Do not change authentication behavior other than relocating the seeding execution point.\n\n- Do not modify the password hashing function implementation (`hashPassword`).\n- Do not modify admin login verification logic/output semantics (e.g., `adminLogin`, `debugAdminLogin` comparisons and return shapes).\n- Any user-facing text introduced/changed by this change must be in English (no new non-English messages).",
      "reqIds": [
        "REQ-59"
      ],
      "status": "pending"
    },
    {
      "id": "AR-45",
      "summary": "Auth login fix: use one shared hash function for both seeding and login verification with hash format SHA256(email + password); ensure seeded admin Status is Active; ensure backend login returns success + session token; persist token in localStorage key `caffeineAdminToken` without modifying UI (backend auth logic only).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-46",
      "summary": "Update the backend admin password hashing so that seeding and login verification use exactly one shared hashing function with hash format SHA256(email + password), and remove any other/legacy hashing comparisons that could allow mismatches.",
      "reqIds": [
        "REQ-60"
      ],
      "status": "pending"
    },
    {
      "id": "AR-47",
      "summary": "Ensure the seeded Super Admin record always has status set to \"Active\" and that login is rejected for any admin user whose status is not \"Active\".",
      "reqIds": [
        "REQ-61"
      ],
      "status": "pending"
    },
    {
      "id": "AR-48",
      "summary": "Ensure the backend always seeds (or upserts) the Super Admin using the same SHA256(email + password) hashing function before any login verification can occur, so that adminLogin works immediately after deploy/upgrade.",
      "reqIds": [
        "REQ-62"
      ],
      "status": "pending"
    },
    {
      "id": "AR-49",
      "summary": "Ensure backend adminLogin returns a success result that includes a session token on valid credentials, and that the session token is persisted server-side in the admin sessions store for subsequent authorization checks.",
      "reqIds": [
        "REQ-63"
      ],
      "status": "pending"
    },
    {
      "id": "AR-50",
      "summary": "Fix admin auth session persistence: ensure backend login returns auth token/session object, store it client-side (localStorage or cookie) under key `caffeineAdminSession`, redirect to `/admin` dashboard after successful login (do not reload/login loop), add session guard to allow `/admin` access when session exists otherwise redirect to `/admin/login`, and ensure password verification uses the same hash function as seeded admin; auth system only (no CMS data changes).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-55",
      "summary": "Ensure admin password verification uses the exact same hashing function as used when seeding the initial admin user, and remove/avoid any mismatched or legacy comparisons that can cause valid seeded credentials to be rejected.",
      "reqIds": [
        "REQ-70"
      ],
      "status": "pending"
    },
    {
      "id": "AR-56",
      "summary": "Temporary emergency admin access bypass (debug-only): disable AdminGuard for /admin, auto-create Super Admin session if none exists, inject temporary admin record (puadsolihan@gmail.com, role=Super Admin, status=Active) skipping password verification, and redirect all /admin traffic to dashboard; do not modify public frontend; bypass must be clearly marked temporary and removable.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-59",
      "summary": "Add a backend emergency bypass login path that (a) upserts an Active Super Admin record for email `puadsolihan@gmail.com` and (b) issues a valid admin session token without verifying any password, intended for temporary debugging only.",
      "reqIds": [
        "REQ-73"
      ],
      "status": "pending"
    },
    {
      "id": "AR-60",
      "summary": "Fix Media Manager authorization: media service must use the same admin session auth as CMS (treat any valid CMS admin session as admin), remove separate principal whitelist, and allow authenticated admins to view/upload/select media without UI or storage changes",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-61",
      "summary": "Update backend media authorization so Media Manager access is granted based on the same admin session token used by the CMS (not based on caller Principal admin/whitelist checks). Specifically, for all media-library operations used by the admin UI (view/list media assets, create/upload media assets, delete media assets, and any blob-storage media read/write endpoints used by the Media Manager), treat the caller as an admin if and only if the provided CMS `sessionToken` is a valid, unexpired admin session.",
      "reqIds": [
        "REQ-76"
      ],
      "status": "pending"
    },
    {
      "id": "AR-62",
      "summary": "Remove (or bypass) any separate Principal-based whitelist/admin check specifically for media viewing and media mutation paths, so that *all* authenticated admins (any role returned by `adminLogin` that represents an admin account) can view, upload, and select media via the existing admin Media Manager flows, without requiring additional Principal allowlisting.",
      "reqIds": [
        "REQ-77"
      ],
      "status": "pending"
    },
    {
      "id": "AR-63",
      "summary": "Fix Admin CMS vehicle editor tab/button state so Passenger Vehicles and Commercial Vehicles controls are visually separated and only the active section is highlighted (avoid both buttons appearing active/red).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-64",
      "summary": "Bring PassengerVehicles and CommercialVehicles CMS editors up to the original blueprint/spec (richer fields/layout/workflow) without regressing auth/storage; improve editor UX while keeping data model compatible.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-65",
      "summary": "Improve public UI quality for vehicle listing grid and vehicle detail pages to be more visually appealing/professional while keeping existing routing and CMS-driven data wiring intact.",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Production-ready automotive profile + vehicle sales website with stable storage, live CMS admin, media manager, and interactions",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}